language: python
python:
  - "3.6"

services:
  - postgresql

before_script:
  - psql -c "create database noise;" -U postgres

install:
  - pip install -r requirements.txt
  - pip install coveralls

script:
  - python noise/manage.py migrate
  - coverage run noise/manage.py test noise

after_success:
  - coveralls

notifications:
  email: false

before_script: "sudo aptitude -y -q install libcairo2-dev libpixman-1-dev libpango1.0-dev libgif-dev libjpeg-dev libgtk2.0-dev vlc libvlc-dev portaudio19-dev libsqlite3-dev libcurl4-openssl-dev makeself curl"
script: "bundle exec rake && bundle exec rake features"
rvm: 1.9.2
notifications:
  irc: "irc.freenode.org#shoes"
  email:
    - shoes@librelist.com
branches:
  except:
    - brown_shoes
